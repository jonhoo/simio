#
# Bellman Ford IO Automata
#

Name:
	BellmanFord

Signature-Input:
	receive(m)

Signature-Output:
	send(m) connect receive

State:
	self.parent = None
	self.dist = 0 if self.i == 0 else None

Transition-Name:
	send(m)
Transition-Precondition:
	return self.dist is not None
Transition-Output:
	print self.i, self.dist
	return (self.i, self.dist)

Transition-Name:
	receive(m)
Transition-Effect:
	act = m[1] + self.weights[m[0]]
	if self.dist is None or act < self.dist:
		self.dist = act
		self.parent = m[0]

Tasks:
	send(m)
